<div class="playground">
	<div class="playground-grid">

		<div class="preview-section">
			<div class="preview-header">
				<h2>Preview</h2>
			</div>
			<div class="preview-container">
				@for (dummy of [configKey]; track dummy) {
					<ngx-analog-clock [config]="config"></ngx-analog-clock>
				}
			</div>
		</div>

		<div class="config-section">
			<div class="config-header">
				<h2>Configuration</h2>
				<div class="config-actions">
					<button class="btn-primary show" (click)="openModal()">Show Config</button>
					<button class="btn-primary" (click)="resetToDefaults()">Reset</button>
				</div>
			</div>
			
			<div class="config-form">
				<div class="form-group">
					<h3>Basic Settings</h3>
					<label>
						<span>Size (px)</span>
						<input 
							type="range" 
							min="100" 
							[max]="maxSize" 
							[(ngModel)]="size"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{size}}</span>
					</label>

					<label>
						<span>Theme</span>
						<select 
							[(ngModel)]="theme"
							(ngModelChange)="onThemeChange()">
							<option value="light">Light</option>
							<option value="dark">Dark</option>
							<option value="custom">Custom</option>
						</select>
					</label>

					<label>
						<span>Timezone</span>
						<input 
							type="text" 
							[ngModel]="timezone"
							(ngModelChange)="onTimezoneChange($event)"
							placeholder="e.g. America/New_York, Europe/London, Asia/Tokyo">
					</label>

					<div class="info-box" *ngIf="theme !== 'custom'">
						<span class="info-icon">ðŸ’¡</span>
						<span class="info-text">
							<strong>Tip:</strong> Switch to <strong>Custom</strong> theme for unlimited color customization and gradient backgrounds!
						</span>
					</div>
				</div>

				<div class="form-group">
					<h3>Hands</h3>
					<h4>Hour Hand</h4>
					<label>
						<span>Show Hand</span>
						<input 
							type="checkbox" 
							[(ngModel)]="hourShow"
							(ngModelChange)="updateConfig()">
					</label>

					<label>
						<span>Length</span>
						<input 
							type="range" 
							min="0.1" 
							max="1.0" 
							step="0.05" 
							[(ngModel)]="hourLength"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{formatLength(hourLength)}}</span>
					</label>

					<label>
						<span>Width (px)</span>
						<input 
							type="range" 
							min="1" 
							max="15" 
							[(ngModel)]="hourWidth"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{hourWidth}}</span>
					</label>

					<h4 style="margin-top: 36px;">Minute Hand</h4>
					<label>
						<span>Show Hand</span>
						<input 
							type="checkbox" 
							[(ngModel)]="minuteShow"
							(ngModelChange)="updateConfig()">
					</label>

					<label>
						<span>Length</span>
						<input 
							type="range" 
							min="0.1" 
							max="1.0" 
							step="0.05" 
							[(ngModel)]="minuteLength"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{formatLength(minuteLength)}}</span>
					</label>

					<label>
						<span>Width (px)</span>
						<input 
							type="range" 
							min="1" 
							max="15" 
							[(ngModel)]="minuteWidth"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{minuteWidth}}</span>
					</label>

					<h4 style="margin-top: 36px;">Second Hand</h4>
					<label>
						<span>Show Hand</span>
						<input 
							type="checkbox" 
							[(ngModel)]="secondShow"
							(ngModelChange)="updateConfig()">
					</label>

					<label>
						<span>Smooth Animation</span>
						<input 
							type="checkbox" 
							[(ngModel)]="smooth"
							(ngModelChange)="updateConfig()">
					</label>

					<label>
						<span>Length</span>
						<input 
							type="range" 
							min="0.1" 
							max="1.0" 
							step="0.05" 
							[(ngModel)]="secondLength"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{formatLength(secondLength)}}</span>
					</label>

					<label>
						<span>Width (px)</span>
						<input 
							type="range" 
							min="1" 
							max="15" 
							[(ngModel)]="secondWidth"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{secondWidth}}</span>
					</label>
				</div>

				<div class="form-group">
					<h3>Display</h3>
					
					<label>
						<span>Markers</span>
						<select 
							[(ngModel)]="markers"
							(ngModelChange)="updateConfig()">
							<option value="lines">Lines</option>
							<option value="numbers">Numbers</option>
							<option value="dots">Dots</option>
							<option value="lines-numbers">Lines + Numbers</option>
							<option value="dots-numbers">Dots + Numbers</option>
							<option value="none">None</option>
						</select>
					</label>

					<label *ngIf="markers === 'numbers' || markers === 'lines-numbers' || markers === 'dots-numbers'">
						<span>Number Style</span>
						<select 
							[(ngModel)]="numberStyle"
							(ngModelChange)="updateConfig()">
							<option value="arabic">Arabic (1-12)</option>
							<option value="roman">Roman (I-XII)</option>
						</select>
					</label>

					<label *ngIf="markers === 'lines' || markers === 'lines-numbers' || markers === 'dots' || markers === 'dots-numbers'">
						<span>Hour Marker Size</span>
						<input 
							type="range" 
							min="1" 
							max="10" 
							[(ngModel)]="hourMarkerWidth"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{hourMarkerWidth}}</span>
					</label>

					<label *ngIf="markers === 'lines' || markers === 'lines-numbers' || markers === 'dots' || markers === 'dots-numbers'">
						<span>Minute Marker Size</span>
						<input 
							type="range" 
							min="0" 
							max="5" 
							step="0.5"
							[(ngModel)]="minuteMarkerWidth"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{minuteMarkerWidth}}</span>
					</label>

					<label *ngIf="markers === 'numbers' || markers === 'lines-numbers' || markers === 'dots-numbers'">
						<span>Number Size</span>
						<input 
							type="range" 
							min="10" 
							max="24" 
							[(ngModel)]="numberSize"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{numberSize}}</span>
					</label>

					<label *ngIf="markers === 'numbers' || markers === 'lines-numbers' || markers === 'dots-numbers'">
						<span>Number Weight</span>
						<select 
							[(ngModel)]="numberWeight"
							(ngModelChange)="updateConfig()">
							<option value="light">Light</option>
							<option value="normal">Normal</option>
							<option value="bold">Bold</option>
						</select>
					</label>

					<label>
						<span>Show Border</span>
						<input 
							type="checkbox" 
							[(ngModel)]="showBorder"
							(ngModelChange)="updateConfig()">
					</label>

					<label *ngIf="showBorder && theme === 'custom'">
						<span>Border Width</span>
						<input 
							type="range" 
							min="1" 
							max="20" 
							[(ngModel)]="borderWidth"
							(input)="onRangeInput($event)"
							(ngModelChange)="updateConfig()">
						<span class="value">{{borderWidth}}</span>
					</label>

					<label>
						<span>Show Inner Ring</span>
						<input 
							type="checkbox" 
							[(ngModel)]="showInnerRing"
							(ngModelChange)="updateConfig()">
					</label>

					<label>
						<span>Show Center Ring</span>
						<input 
							type="checkbox" 
							[(ngModel)]="showCenterRing"
							(ngModelChange)="updateConfig()">
					</label>
				</div>

				<div class="form-group">
					<h3>Digital Display</h3>

					<label>
						<span>Show Digital Display</span>
						<input 
							type="checkbox" 
							[(ngModel)]="showDigitalDisplay"
							(ngModelChange)="updateConfig()">
					</label>

					<label *ngIf="showDigitalDisplay">
						<span>Format</span>
						<select 
							[(ngModel)]="digitalFormat"
							(ngModelChange)="updateConfig()">
							<option value="12h">12 Hour</option>
							<option value="24h">24 Hour</option>
						</select>
					</label>

					<label *ngIf="showDigitalDisplay">
						<span>Show Seconds</span>
						<input 
							type="checkbox" 
							[(ngModel)]="digitalShowSeconds"
							(ngModelChange)="updateConfig()">
					</label>

					<label *ngIf="showDigitalDisplay">
						<span>Show Date</span>
						<input 
							type="checkbox" 
							[(ngModel)]="digitalShowDate"
							(ngModelChange)="updateConfig()">
					</label>

					<label *ngIf="showDigitalDisplay && theme === 'custom'">
						<span>Digital Color</span>
						<input 
							type="color" 
							[(ngModel)]="digitalColor"
							(ngModelChange)="updateConfig()">
					</label>
				</div>

				<div class="form-group">
					<h3>Label</h3>
					
					<label>
						<span>Text</span>
						<input 
							type="text" 
							[(ngModel)]="labelText"
							(ngModelChange)="updateConfig()"
							placeholder="Enter label text">
					</label>

					<label *ngIf="hasLabel">
						<span>Position</span>
						<select 
							[(ngModel)]="labelPosition"
							(ngModelChange)="updateConfig()">
							<option value="top">Top</option>
							<option value="bottom">Bottom</option>
						</select>
					</label>
				</div>

				<div class="form-group" *ngIf="theme === 'custom'">
					<h3>Custom Colors</h3>

					<label style="margin-bottom: 12px;">
						<span>Use Custom Colors</span>
						<input 
							type="checkbox" 
							[(ngModel)]="useCustomColors"
							(ngModelChange)="onUseCustomColorsChange()">
					</label>

					<div class="custom-colors-section" *ngIf="useCustomColors">
						<h4>Hands</h4>
						<label>
							<span>Hour Hand</span>
							<input 
								type="color" 
								[(ngModel)]="customHourHand"
								(ngModelChange)="updateConfig()">
						</label>

						<label>
							<span>Minute Hand</span>
							<input 
								type="color" 
								[(ngModel)]="customMinuteHand"
								(ngModelChange)="updateConfig()">
						</label>

						<label>
							<span>Second Hand</span>
							<input 
								type="color" 
								[(ngModel)]="customSecondHand"
								(ngModelChange)="updateConfig()">
						</label>

						<h4>Markers</h4>
						<label>
							<span>Hour Markers</span>
							<input 
								type="color" 
								[(ngModel)]="customHourMarker"
								(ngModelChange)="updateConfig()">
						</label>

						<label>
							<span>Minute Markers</span>
							<input 
								type="color" 
								[(ngModel)]="customMinuteMarker"
								(ngModelChange)="updateConfig()">
						</label>

						<h4>Center</h4>
						<label>
							<span>Center Dot</span>
							<input 
								type="color" 
								[(ngModel)]="customCenterDot"
								(ngModelChange)="updateConfig()">
						</label>

						<label>
							<span>Center Ring</span>
							<input 
								type="color" 
								[(ngModel)]="customCenterRing"
								(ngModelChange)="updateConfig()">
						</label>

						<h4 style="margin: 24px 0px;">Background & Border</h4>
						<label>
							<span>Use Gradient</span>
							<input 
								type="checkbox" 
								[(ngModel)]="useGradient"
								(ngModelChange)="updateConfig()">
						</label>

						<div *ngIf="!useGradient">
							<label style="margin-bottom: 12px;">
								<span>Background</span>
								<input 
									type="color" 
									[(ngModel)]="customBackground"
									(ngModelChange)="updateConfig()">
							</label>
						</div>

						<div *ngIf="useGradient">
							<label>
								<span>Gradient Type</span>
								<select 
									[(ngModel)]="gradientType"
									(ngModelChange)="updateConfig()">
									<option value="linear">Linear</option>
									<option value="radial">Radial</option>
								</select>
							</label>

							<label>
								<span>Start Color</span>
								<input 
									type="color" 
									[(ngModel)]="gradientStart"
									(ngModelChange)="updateConfig()">
							</label>

							<label style="margin-bottom: 12px;">
								<span>End Color</span>
								<input 
									type="color" 
									[(ngModel)]="gradientEnd"
									(ngModelChange)="updateConfig()">
							</label>

							<label *ngIf="gradientType === 'linear'" style="margin-bottom: 12px;">
								<span>Angle (deg)</span>
								<input 
									type="range" 
									min="0" 
									max="360" 
									[(ngModel)]="gradientAngle"
									(input)="onRangeInput($event)"
									(ngModelChange)="updateConfig()">
								<span class="value">{{gradientAngle}}Â°</span>
							</label>
						</div>

						<label>
							<span>Border</span>
							<input 
								type="color" 
								[(ngModel)]="customBorder"
								(ngModelChange)="updateConfig()">
						</label>

						<label>
							<span>Inner Ring</span>
							<input 
								type="color" 
								[(ngModel)]="customInnerRing"
								(ngModelChange)="updateConfig()">
						</label>

						<label *ngIf="hasLabel">
							<span>Label Color</span>
							<input 
								type="color" 
								[(ngModel)]="customLabel"
								(ngModelChange)="updateConfig()">
						</label>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<app-config-modal
	[show]="showConfigModal"
	[title]="selectedClockName"
	[code]="formattedConfig"
	(close)="closeModal()">
</app-config-modal>